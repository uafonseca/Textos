{% extends 'layout.html.twig' %}

{% block title %}
	{{book.title}}
{% endblock %}

{% block body %}
	<h1>{{ book.title }}</h1>
	<div class="row">
		<div class="col-12 col-md-6 col-lg-4">
			<div class="card">
				<img class="card-img-top" src="{{ vich_uploader_asset(book.portada , 'imagenFile') }}" alt="Unsplash">
				<div class="card-header">
					<h5 class="card-title mb-0">{{ book.title }}</h5>
				</div>
				<div class="card-body">
					<p class="card-text">{{ book.level }}</p>
				</div>
			</div>
		</div>
		<div class="col-12 col-md-6 col-lg-6">
			<div id="accordion">
				{% for item in book.units %}
					<div class="card">
						<div id="heading-{{item.uuid}}" class="card-header">
							<h5 class="mb-0">

								<button class="btn btn-link">	
									<i class="fa fa-book-open"></i> {{ item.name }}
								</button>
								 
								<button class="btn btn-warning btn-sm pull-right ml-3 mt-1" data-toggle="collapse" data-target="#e{{item.id}}" aria-expanded="true" aria-controls="e{{item.id}}">	
									<i class="fa fa-list"></i> Recursos
								</button>
								<a href="{{ path('unit_show', {'uuid': item.uuid}) }}" target="_blank"  class="btn btn-success btn-sm pull-right mt-1">
								<i class="fas fa-file-pdf"></i> 
									Ingresar
								</a>
							
							</h5>
						</div>
						<div id="e{{item.id}}" class="collapse" aria-labelledby="heading-{{item.uuid}}" data-parent="#accordion">
							<div class="card-body">
								{% for activity in item.activities %}
								{%if activity.file %}
									<h6 class="">
										<a href="{{path('show_resource',{id:activity.id})}}" class="show-details"> <i class="fa {{getIcon(activity.file.mimeType)}}"> </i>
										{{activity.name}}
										</a>
									</h6>
								{%endif %}
								{% endfor %}
							</div>
						</div>
					</div>
				{% endfor %}
			</div>
		</div>
	</div>
{% endblock %}

{% block javascripts %}
	<script type="text/javascript">
		$(function(){
			$('.show-details').on('click', function(event){
				event.preventDefault();
				const scope = $(this);
				app.dialogs.create({
					url: scope.attr('href'),
				})
			})
		})
	</script>
{% endblock %}
